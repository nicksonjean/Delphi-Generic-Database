unit Unit1;

interface

uses
  System.SysUtils,
  System.Types,
  System.UITypes,
  System.Classes,
  System.Variants,
  System.Rtti,
  System.Bindings.Outputs,
  System.StrUtils,

  FMX.Types,
  FMX.Controls,
  FMX.Forms,
  FMX.Graphics,
  FMX.Dialogs,
  FMX.Controls.Presentation,
  FMX.StdCtrls,
  FMX.TabControl,
  FMX.Bind.Editors,
  FMX.Grid.Style,
  FMX.ScrollBox,
  FMX.Grid,
  FMX.Bind.DBEngExt,
  FMX.Bind.Grid,
  FMX.ExtCtrls,
  FMX.ListBox,
  FMX.ComboEdit,
  FMX.Layouts,
  FMX.Edit,
  FMX.ListView.Types,
  FMX.ListView.Appearances,
  FMX.ListView.Adapters.Base,
  FMX.ListView,
  FMX.Objects,
  FMX.SearchBox,
  FMX.Memo,

  FMX.Edit.Helper,
  FMX.&Object.Helper,
  Float,
  &Array,
  SQLConnection,
  Connector
  ;

type
  TSQLConnectionTester = class(TForm)
    TabControl: TTabControl;
    TabSQLConnection: TTabItem;
    TabDataTypes: TTabItem;
    TabControlSQLConnection: TTabControl;
    TabDBSQLite: TTabItem;
    GroupBoxComponentsSQLite: TGroupBox;
    GridPanelLayoutSQLite: TGridPanelLayout;
    LabelComboBoxSQLite: TLabel;
    LabelComboEditSQLite: TLabel;
    ComboBoxSQLite: TComboBox;
    ComboEditSQLite: TComboEdit;
    LabelListBoxSQLite: TLabel;
    LabelListViewSQLite: TLabel;
    ListBoxSQLite: TListBox;
    ListViewSQLite: TListView;
    LabelStringGridSQLite: TLabel;
    LabelGridSQLite: TLabel;
    StringGridSQLite: TStringGrid;
    GridSQLite: TGrid;
    TabDBFirebird: TTabItem;
    GroupBoxComponentsFirebird: TGroupBox;
    GridPanelLayoutFirebird: TGridPanelLayout;
    LabelComboBoxFirebird: TLabel;
    LabelComboEditFirebird: TLabel;
    ComboEditFirebird: TComboEdit;
    LabelListBoxFirebird: TLabel;
    LabelListViewFirebird: TLabel;
    LabelStringGridFirebird: TLabel;
    LabelGridFirebird: TLabel;
    ComboBoxFirebird: TComboBox;
    ListBoxFirebird: TListBox;
    ListViewFirebird: TListView;
    StringGridFirebird: TStringGrid;
    GridFirebird: TGrid;
    TabDBMySQL: TTabItem;
    GroupBoxComponentsMySQL: TGroupBox;
    GridPanelLayoutMySQL: TGridPanelLayout;
    LabelComboBoxMySQL: TLabel;
    LabelComboEditMySQL: TLabel;
    ComboEditMySQL: TComboEdit;
    LabelListBoxMySQL: TLabel;
    LabelListViewMySQL: TLabel;
    LabelStringGridMySQL: TLabel;
    LabelGridMySQL: TLabel;
    ComboBoxMySQL: TComboBox;
    ListBoxMySQL: TListBox;
    ListViewMySQL: TListView;
    StringGridMySQL: TStringGrid;
    GridMySQL: TGrid;
    TabDBPostgreSQL: TTabItem;
    GroupBoxComponentsPostgreSQL: TGroupBox;
    GridPanelLayoutPostgreSQL: TGridPanelLayout;
    LabelComboBoxPostgreSQL: TLabel;
    LabelComboEditPostgreSQL: TLabel;
    ComboEditPostgreSQL: TComboEdit;
    LabelListBoxPostgreSQL: TLabel;
    LabelListViewPostgreSQL: TLabel;
    LabelStringGridPostgreSQL: TLabel;
    LabelGridPostgreSQL: TLabel;
    ComboBoxPostgreSQL: TComboBox;
    ListBoxPostgreSQL: TListBox;
    ListViewPostgreSQL: TListView;
    StringGridPostgreSQL: TStringGrid;
    GridPostgreSQL: TGrid;
    SearchBoxSQLite: TSearchBox;
    SearchBoxFirebird: TSearchBox;
    SearchBoxMySQL: TSearchBox;
    SearchBoxPostgreSQL: TSearchBox;
    TabQueryBuilder: TTabItem;
    TabControlDataTypes: TTabControl;
    TabStrings: TTabItem;
    TabFloats: TTabItem;
    TabDateTime: TTabItem;
    TabArrays: TTabItem;
    GroupBoxQueryBuilderArrays: TGroupBox;
    GridPanelLayoutQueryBuilderArray: TGridPanelLayout;
    LabelQueryBuilderArray: TLabel;
    LabelQueryBuilderArrayVariant: TLabel;
    LabelQueryBuilderArrayField: TLabel;
    ComboBoxQueryBuilderArray: TComboBox;
    ComboBoxQueryBuilderArrayVariant: TComboBox;
    ComboBoxQueryBuilderArrayField: TComboBox;
    GridPanelLayout2: TGridPanelLayout;
    ButToStr: TButton;
    ButInsert: TButton;
    ButUpdate: TButton;
    ButDelete: TButton;
    ButFetch: TButton;
    ButReplace: TButton;
    ButUpsert: TButton;
    GridPanelLayout3: TGridPanelLayout;
    ButClone: TButton;
    ButCopy: TButton;
    GroupBoxDataTypeArray: TGroupBox;
    GridPanelLayoutDataTypeArray: TGridPanelLayout;
    LabelDataTypeArray: TLabel;
    LabelDataTypeArrayVariant: TLabel;
    LabelDataTypeArrayField: TLabel;
    ComboBoxDataTypeTArray: TComboBox;
    ComboBoxDataTypeTArrayVariant: TComboBox;
    ComboBoxDataTypeTArrayField: TComboBox;
    MemoQueryBuilderArrayResult: TMemo;
    MemoDataTypeArrayResult: TMemo;
    Button1: TButton;
    GridPanelLayoutFloats: TGridPanelLayout;
    GroupBoxFloatFormat: TGroupBox;
    GridPanelLayoutFloatFormat: TGridPanelLayout;
    LayoutFloatFormatTest1: TLayout;
    EditLength1: TEdit;
    EditDecimal1: TEdit;
    LayoutFloatFormatTest2: TLayout;
    EditLength2: TEdit;
    EditDecimal2: TEdit;
    LayoutFloatFormatTest3: TLayout;
    EditLength3: TEdit;
    EditDecimal3: TEdit;
    LayoutFloatFormatTest4: TLayout;
    EditLength4: TEdit;
    EditDecimal4: TEdit;
    LayoutFloatFormatTest5: TLayout;
    EditLength5: TEdit;
    EditDecimal5: TEdit;
    LayoutFloatFormatTest6: TLayout;
    EditLength6: TEdit;
    EditDecimal6: TEdit;
    LayoutFloatFormatTest7: TLayout;
    EditLength7: TEdit;
    EditDecimal7: TEdit;
    MemoResultFormat: TMemo;
    GroupBoxFloatCalculate: TGroupBox;
    GridPanelLayout6: TGridPanelLayout;
    Calculate: TButton;
    MemoResultCalculate: TMemo;
    ComboBoxResult1: TComboBox;
    ComboBoxResult2: TComboBox;
    ComboBoxResult3: TComboBox;
    ComboBoxResult4: TComboBox;
    ComboBoxResult5: TComboBox;
    ComboBoxResult6: TComboBox;
    ComboBoxResult7: TComboBox;
    GridPanelLayout7: TGridPanelLayout;
    Edit1: TEdit;
    Edit2: TEdit;
    GridPanelLayout8: TGridPanelLayout;
    Edit3: TEdit;
    Edit4: TEdit;
    GridPanelLayout9: TGridPanelLayout;
    Edit5: TEdit;
    Edit6: TEdit;
    GridPanelLayout10: TGridPanelLayout;
    Edit7: TEdit;
    Edit8: TEdit;
    GridPanelLayout11: TGridPanelLayout;
    Edit9: TEdit;
    Edit10: TEdit;
    GridPanelLayout12: TGridPanelLayout;
    Edit11: TEdit;
    Edit12: TEdit;
    GridPanelLayout13: TGridPanelLayout;
    Edit13: TEdit;
    Edit14: TEdit;
    Edit15: TEdit;
    Edit16: TEdit;
    Edit17: TEdit;
    Edit18: TEdit;
    Edit19: TEdit;
    Edit20: TEdit;
    Edit21: TEdit;
    GridPanelLayoutFloatFormatActions: TGridPanelLayout;
    FormatExplicit: TButton;
    FormatImplicit: TButton;
    GridPanelLayout5: TGridPanelLayout;
    EditKeyDownFloat: TEdit;
    EditKeyDownMoney: TEdit;
    procedure ButInsertClick(Sender: TObject);
    procedure ButUpdateClick(Sender: TObject);
    procedure ButDeleteClick(Sender: TObject);
    procedure ButReplaceClick(Sender: TObject);
    procedure ButUpsertClick(Sender: TObject);
    procedure ButToStrClick(Sender: TObject);
    procedure ButFetchClick(Sender: TObject);
    procedure ButCloneClick(Sender: TObject);
    procedure ButCopyClick(Sender: TObject);
    procedure TabDBSQLiteClick(Sender: TObject);
    procedure TabDBFirebirdClick(Sender: TObject);
    procedure TabDBMySQLClick(Sender: TObject);
    procedure TabDBPostgreSQLClick(Sender: TObject);
    procedure ComboBoxDataTypeTArrayChange(Sender: TObject);
    procedure ComboBoxDataTypeTArrayVariantChange(Sender: TObject);
    procedure ComboBoxDataTypeTArrayFieldChange(Sender: TObject);
    procedure FormatExplicitClick(Sender: TObject);
    procedure CalculateClick(Sender: TObject);
    procedure Button1Click(Sender: TObject);
    procedure FormatImplicitClick(Sender: TObject);
    procedure EditKeyDownMoneyKeyDown(Sender: TObject; var Key: Word;
      var KeyChar: Char; Shift: TShiftState);
    procedure EditKeyDownFloatKeyDown(Sender: TObject; var Key: Word;
      var KeyChar: Char; Shift: TShiftState);
    procedure FormShow(Sender: TObject);
    { Private declarations }
  public
    { Public declarations }
    procedure DataTypeArrayTest(Sender : TObject);

  end;

var
  SQLConnectionTester: TSQLConnectionTester;

implementation

{$R *.fmx}

procedure TSQLConnectionTester.DataTypeArrayTest(Sender: TObject);
var
  Value : String;
begin
  Value := TComboBox(Sender).Selected.Text;
  case AnsiIndexStr(Value, ['Fetch','Copy','Clone','ToList','ToTags','ToXML','ToJSON','ToYAML']) of
    0 : MemoDataTypeArrayResult.Lines.Text := Value;
    1 : MemoDataTypeArrayResult.Lines.Text := Value;
    2 : MemoDataTypeArrayResult.Lines.Text := Value;
    3 : MemoDataTypeArrayResult.Lines.Text := Value;
    4 : MemoDataTypeArrayResult.Lines.Text := Value;
    5 : MemoDataTypeArrayResult.Lines.Text := Value;
    6 : MemoDataTypeArrayResult.Lines.Text := Value;
    7 : MemoDataTypeArrayResult.Lines.Text := Value;
  end;
end;

procedure TSQLConnectionTester.EditKeyDownFloatKeyDown(Sender: TObject; var Key: Word; var KeyChar: Char; Shift: TShiftState);
begin
  TEdit(Sender).SetMaskFloatKeyDown(KeyChar, Key);
end;

procedure TSQLConnectionTester.EditKeyDownMoneyKeyDown(Sender: TObject; var Key: Word; var KeyChar: Char; Shift: TShiftState);
begin
  TEdit(Sender).SetMaskMoneyKeyDown(KeyChar, Key);
end;

procedure TSQLConnectionTester.ButFetchClick(Sender: TObject);
var
  DB: TConnection;
  Dados1 : TArray;
  Query1: TQueryBuilder;
  Dados2 : TArrayVariant;
  Query2: TQueryBuilder;
begin
  DB := TConnection.Create;
  //DB := TConnectionClass.GetInstance();
  try
    DB.Driver := MYSQL;
    DB.Host := '127.0.0.1';
    DB.Port := 3306;
    DB.Database := 'simapp_dev_000';
    DB.Username := 'root';
    DB.Password := '';

    if not DB.GetInstance.Connection.Connected then
      DB.GetInstance.Connection.Connected := True;

    Dados1 := TArray.Create;
    try
      Dados1.Clear;
      Query1.Fetch('SELECT * FROM app_empresa', Dados1);
      ShowMessage(Dados1['arquivo_imagem_raw']);
    finally
      FreeAndNil(Dados1);
    end;

    Dados2 := TArrayVariant.Create;
    try
      Dados2.Clear;
      Query2.Fetch('SELECT * FROM app_empresa', Dados2);
      ShowMessage(Dados2['arquivo_imagem_raw']);
    finally
      FreeAndNil(Dados2);
    end;

  finally
    FreeAndNil(DB);
  end;
end;

procedure TSQLConnectionTester.ButToStrClick(Sender: TObject);
var
  DB: TConnection;
  Dados1 : TArray;
  Query1: TQueryBuilder;
  SQL1: TQuery;
  Dados2 : TArrayVariant;
  Query2: TQueryBuilder;
  SQL2: TQuery;
begin
  DB := TConnection.Create;
  //DB := TConnectionClass.GetInstance();
  try
    DB.Driver := MYSQL;
    DB.Host := '127.0.0.1';
    DB.Port := 3306;
    DB.Database := 'simapp_dev_000';
    DB.Username := 'root';
    DB.Password := '';

    if not DB.GetInstance.Connection.Connected then
      DB.GetInstance.Connection.Connected := True;

    Dados1 := TArray.Create;
    SQL1 := TQuery.Create();
    try
      Dados1.Clear;
      SQL1 := Query1.View('SELECT * FROM app_empresa');
      Dados1['id'] := SQL1.Query.FieldByName('id').Value;
      Dados1['tipo_pessoa'] := SQL1.Query.FieldByName('tipo_pessoa').Value;
      Dados1['tipo_documento'] := SQL1.Query.FieldByName('tipo_documento').Value;
      Dados1['tipo_estabelecimento'] := SQL1.Query.FieldByName('tipo_estabelecimento').Value;
      Dados1['regime_tributario'] := SQL1.Query.FieldByName('regime_tributario').Value;
      Dados1['documento_cadastral'] := SQL1.Query.FieldByName('documento_cadastral').Value;
      Dados1['inscricao_estadual'] := SQL1.Query.FieldByName('inscricao_estadual').Value;
      Dados1['inscricao_municipal'] := SQL1.Query.FieldByName('inscricao_municipal').Value;
      Dados1['razao_social'] := SQL1.Query.FieldByName('razao_social').Value;
      Dados1['nome_fantasia'] := SQL1.Query.FieldByName('nome_fantasia').Value;
      Dados1['cnae_principal_id'] := SQL1.Query.FieldByName('cnae_principal_id').Value;
      Dados1['arquivo_imagem_url'] := SQL1.Query.FieldByName('arquivo_imagem_url').Value;
      Dados1['arquivo_imagem_raw'] := SQL1.Query.FieldByName('arquivo_imagem_raw').Value;
      Dados1['endereco'] := SQL1.Query.FieldByName('endereco').Value;
      Dados1['contato'] := SQL1.Query.FieldByName('contato').Value;
      Dados1['email'] := SQL1.Query.FieldByName('email').Value;
      Dados1['sincronizado'] := SQL1.Query.FieldByName('sincronizado').Value;
      Dados1['data_insercao'] := SQL1.Query.FieldByName('data_insercao').Value;
      Dados1['data_edicao'] := SQL1.Query.FieldByName('data_edicao').Value;
      Showmessage(Dados1.ToList);
    finally
      FreeAndNil(Dados1);
      FreeAndNil(SQL1);
    end;

    Dados2 := TArrayVariant.Create;
    SQL2 := TQuery.Create();
    try
      Dados2.Clear;
      SQL2 := Query2.View('SELECT * FROM app_empresa');
      Dados2['id'] := SQL2.Query.FieldByName('id').Value;
      Dados2['tipo_pessoa'] := SQL2.Query.FieldByName('tipo_pessoa').Value;
      Dados2['tipo_documento'] := SQL2.Query.FieldByName('tipo_documento').Value;
      Dados2['tipo_estabelecimento'] := SQL2.Query.FieldByName('tipo_estabelecimento').Value;
      Dados2['regime_tributario'] := SQL2.Query.FieldByName('regime_tributario').Value;
      Dados2['documento_cadastral'] := SQL2.Query.FieldByName('documento_cadastral').Value;
      Dados2['inscricao_estadual'] := SQL2.Query.FieldByName('inscricao_estadual').Value;
      Dados2['inscricao_municipal'] := SQL2.Query.FieldByName('inscricao_municipal').Value;
      Dados2['razao_social'] := SQL2.Query.FieldByName('razao_social').Value;
      Dados2['nome_fantasia'] := SQL2.Query.FieldByName('nome_fantasia').Value;
      Dados2['cnae_principal_id'] := SQL2.Query.FieldByName('cnae_principal_id').Value;
      Dados2['arquivo_imagem_url'] := SQL2.Query.FieldByName('arquivo_imagem_url').Value;
      Dados2['arquivo_imagem_raw'] := SQL2.Query.FieldByName('arquivo_imagem_raw').Value;
      Dados2['endereco'] := SQL2.Query.FieldByName('endereco').Value;
      Dados2['contato'] := SQL2.Query.FieldByName('contato').Value;
      Dados2['email'] := SQL2.Query.FieldByName('email').Value;
      Dados2['sincronizado'] := SQL2.Query.FieldByName('sincronizado').Value;
      Dados2['data_insercao'] := SQL2.Query.FieldByName('data_insercao').Value;
      Dados2['data_edicao'] := SQL2.Query.FieldByName('data_edicao').Value;
      Showmessage(Dados2.ToList);
    finally
      FreeAndNil(Dados2);
      FreeAndNil(SQL2);
    end;

  finally
    FreeAndNil(DB);
  end;
end;

procedure TSQLConnectionTester.ButUpsertClick(Sender: TObject);
var
  DB: TConnection;
  Dados1 : TArray;
  Query1: TQueryBuilder;
  SQL1: TQuery;
  Dados2 : TArrayVariant;
  Query2: TQueryBuilder;
  SQL2: TQuery;
begin
  DB := TConnection.Create;
  //DB := TConnectionClass.GetInstance();
  try
    DB.Driver := MYSQL;
    DB.Host := '127.0.0.1';
    DB.Port := 3306;
    DB.Database := 'simapp_dev_000';
    DB.Username := 'root';
    DB.Password := '';

    if not DB.GetInstance.Connection.Connected then
      DB.GetInstance.Connection.Connected := True;

    Dados1 := TArray.Create;
    SQL1 := TQuery.Create();
    try
      Dados1.Clear;
      SQL1 := Query1.View('SELECT * FROM app_empresa');
      Dados1['id'] := SQL1.Query.FieldByName('id').Value;
      Dados1['tipo_pessoa'] := SQL1.Query.FieldByName('tipo_pessoa').Value;
      Dados1['tipo_documento'] := SQL1.Query.FieldByName('tipo_documento').Value;
      Dados1['tipo_estabelecimento'] := SQL1.Query.FieldByName('tipo_estabelecimento').Value;
      Dados1['regime_tributario'] := SQL1.Query.FieldByName('regime_tributario').Value;
      Dados1['documento_cadastral'] := SQL1.Query.FieldByName('documento_cadastral').Value;
      Dados1['inscricao_estadual'] := SQL1.Query.FieldByName('inscricao_estadual').Value;
      Dados1['inscricao_municipal'] := SQL1.Query.FieldByName('inscricao_municipal').Value;
      Dados1['razao_social'] := SQL1.Query.FieldByName('razao_social').Value;
      Dados1['nome_fantasia'] := SQL1.Query.FieldByName('nome_fantasia').Value;
      Dados1['cnae_principal_id'] := SQL1.Query.FieldByName('cnae_principal_id').Value;
      Dados1['arquivo_imagem_url'] := SQL1.Query.FieldByName('arquivo_imagem_url').Value;
      Dados1['arquivo_imagem_raw'] := SQL1.Query.FieldByName('arquivo_imagem_raw').Value;
      Dados1['endereco'] := SQL1.Query.FieldByName('endereco').Value;
      Dados1['contato'] := SQL1.Query.FieldByName('contato').Value;
      Dados1['email'] := SQL1.Query.FieldByName('email').Value;
      Dados1['sincronizado'] := SQL1.Query.FieldByName('sincronizado').Value;
      Dados1['data_insercao'] := SQL1.Query.FieldByName('data_insercao').Value;
      Dados1['data_edicao'] := SQL1.Query.FieldByName('data_edicao').Value;
      Showmessage(Query1.Upsert('app_empresa', Dados1, False, False, False));
      Showmessage(Query1.Upsert('app_empresa', Dados1, False, False, True));
    finally
      FreeAndNil(Dados1);
      FreeAndNil(SQL1);
    end;

    Dados2 := TArrayVariant.Create;
    SQL2 := TQuery.Create();
    try
      Dados2.Clear;
      SQL2 := Query2.View('SELECT * FROM app_empresa');
      Dados2['id'] := SQL2.Query.FieldByName('id').Value;
      Dados2['tipo_pessoa'] := SQL2.Query.FieldByName('tipo_pessoa').Value;
      Dados2['tipo_documento'] := SQL2.Query.FieldByName('tipo_documento').Value;
      Dados2['tipo_estabelecimento'] := SQL2.Query.FieldByName('tipo_estabelecimento').Value;
      Dados2['regime_tributario'] := SQL2.Query.FieldByName('regime_tributario').Value;
      Dados2['documento_cadastral'] := SQL2.Query.FieldByName('documento_cadastral').Value;
      Dados2['inscricao_estadual'] := SQL2.Query.FieldByName('inscricao_estadual').Value;
      Dados2['inscricao_municipal'] := SQL2.Query.FieldByName('inscricao_municipal').Value;
      Dados2['razao_social'] := SQL2.Query.FieldByName('razao_social').Value;
      Dados2['nome_fantasia'] := SQL2.Query.FieldByName('nome_fantasia').Value;
      Dados2['cnae_principal_id'] := SQL2.Query.FieldByName('cnae_principal_id').Value;
      Dados2['arquivo_imagem_url'] := SQL2.Query.FieldByName('arquivo_imagem_url').Value;
      Dados2['arquivo_imagem_raw'] := SQL2.Query.FieldByName('arquivo_imagem_raw').Value;
      Dados2['endereco'] := SQL2.Query.FieldByName('endereco').Value;
      Dados2['contato'] := SQL2.Query.FieldByName('contato').Value;
      Dados2['email'] := SQL2.Query.FieldByName('email').Value;
      Dados2['sincronizado'] := SQL2.Query.FieldByName('sincronizado').Value;
      Dados2['data_insercao'] := SQL2.Query.FieldByName('data_insercao').Value;
      Dados2['data_edicao'] := SQL2.Query.FieldByName('data_edicao').Value;
      Showmessage(Query2.Upsert('app_empresa', Dados2, False, False, False));
      Showmessage(Query2.Upsert('app_empresa', Dados2, False, False, True));
    finally
      FreeAndNil(Dados2);
      FreeAndNil(SQL2);
    end;

  finally
    FreeAndNil(DB);
  end;
end;

procedure TSQLConnectionTester.ComboBoxDataTypeTArrayChange(Sender: TObject);
begin
  Self.DataTypeArrayTest(Sender);
end;

procedure TSQLConnectionTester.ComboBoxDataTypeTArrayFieldChange(Sender: TObject);
begin
  Self.DataTypeArrayTest(Sender);
end;

procedure TSQLConnectionTester.ComboBoxDataTypeTArrayVariantChange(Sender: TObject);
begin
  Self.DataTypeArrayTest(Sender);
end;


procedure TSQLConnectionTester.CalculateClick(Sender: TObject);
begin
  {
  MemoResult.Lines.Clear;
  MemoResult.Lines.Append(
    'Cálculo: ' + TFormatMoney.ToString(LabelProductLength.Text, 4) + ' * ' + TFormatMoney.ToString(LabelProductValue.Text)
     + ' - Truncando: ' + TFormatMoney.ToString(CurrToStr(TFormatMoney.ToCurrency(LabelProductLength.Text, 4) * TFormatMoney.ToCurrency(LabelProductValue.Text)), 2, TResultMode.Truncate)
  );
  MemoResult.Lines.Append(
    'Cálculo: ' + TFormatMoney.ToString(LabelProductLength.Text, 4) + ' * ' + TFormatMoney.ToString(LabelProductValue.Text)
     + ' - Arredondando: ' + TFormatMoney.ToString(CurrToStr(TFormatMoney.ToCurrency(LabelProductLength.Text, 4) * TFormatMoney.ToCurrency(LabelProductValue.Text)), 2, TResultMode.Round)
  );
  MemoResult.Lines.Append('------------------------------------------------------------------------------');
  MemoResult.Lines.Append(
    'Cálculo: ' + TFormatMoney.ToString(LabelProductLength.Text, 4) + ' * ' + TFormatMoney.ToString(LabelProductValue.Text)
     + ' - Truncando: ' + TFormatMoney.ToString(FloatToStr(TFormatMoney.ToDouble(LabelProductLength.Text, 4) * TFormatMoney.ToDouble(LabelProductValue.Text)), 2, TResultMode.Truncate)
  );
  MemoResult.Lines.Append(
    'Cálculo: ' + TFormatMoney.ToString(LabelProductLength.Text, 4) + ' * ' + TFormatMoney.ToString(LabelProductValue.Text)
     + ' - Arredondando: ' + TFormatMoney.ToString(FloatToStr(TFormatMoney.ToDouble(LabelProductLength.Text, 4) * TFormatMoney.ToDouble(LabelProductValue.Text)), 2, TResultMode.Round)
  );
  MemoResult.Lines.Append('------------------------------------------------------------------------------');
  MemoResult.Lines.Append(
    'Cálculo: ' + TFormatMoney.ToString(LabelProductLength.Text, 4) + ' * ' + TFormatMoney.ToString(LabelProductValue.Text)
     + ' - Truncando: ' + TFormatMoney.ToString(FloatToStr(TFormatMoney.ToExtended(LabelProductLength.Text, 4) * TFormatMoney.ToExtended(LabelProductValue.Text)), 2, TResultMode.Truncate)
  );
  MemoResult.Lines.Append(
    'Cálculo: ' + TFormatMoney.ToString(LabelProductLength.Text, 4) + ' * ' + TFormatMoney.ToString(LabelProductValue.Text)
     + ' - Arredondando: ' + TFormatMoney.ToString(FloatToStr(TFormatMoney.ToExtended(LabelProductLength.Text, 4) * TFormatMoney.ToExtended(LabelProductValue.Text)), 2, TResultMode.Round)
  );
  }
end;

procedure TSQLConnectionTester.FormatExplicitClick(Sender: TObject);
begin
  MemoResultFormat.Lines.Clear;
  MemoResultFormat.Lines.Append('Original: ' + EditLength1.Text + ' - Valor: ' + TFloat.ToString(EditLength1.Text, TResultMode(ComboBoxResult1.ItemIndex), TResultFormat.BR, StrToInt(EditDecimal1.Text)));
  MemoResultFormat.Lines.Append('------------------------------------------------------------------------------');
  MemoResultFormat.Lines.Append('Original: ' + EditLength2.Text + ' - Valor: ' + TFloat.ToString(EditLength2.Text, TResultMode(ComboBoxResult2.ItemIndex), TResultFormat.BR, StrToInt(EditDecimal2.Text)));
  MemoResultFormat.Lines.Append('------------------------------------------------------------------------------');
  MemoResultFormat.Lines.Append('Original: ' + EditLength3.Text + ' - Valor: ' + TFloat.ToString(EditLength3.Text, TResultMode(ComboBoxResult3.ItemIndex), TResultFormat.BR, StrToInt(EditDecimal3.Text)));
  MemoResultFormat.Lines.Append('------------------------------------------------------------------------------');
  MemoResultFormat.Lines.Append('Original: ' + EditLength4.Text + ' - Valor: ' + TFloat.ToString(EditLength4.Text, TResultMode(ComboBoxResult4.ItemIndex), TResultFormat.BR, StrToInt(EditDecimal4.Text)));
  MemoResultFormat.Lines.Append('------------------------------------------------------------------------------');
  MemoResultFormat.Lines.Append('Original: ' + EditLength5.Text + ' - Valor: ' + TFloat.ToString(EditLength5.Text, TResultMode(ComboBoxResult5.ItemIndex), TResultFormat.BR, StrToInt(EditDecimal5.Text)));
  MemoResultFormat.Lines.Append('------------------------------------------------------------------------------');
  MemoResultFormat.Lines.Append('Original: ' + EditLength6.Text + ' - Valor: ' + TFloat.ToString(EditLength6.Text, TResultMode(ComboBoxResult6.ItemIndex), TResultFormat.BR, StrToInt(EditDecimal6.Text)));
  MemoResultFormat.Lines.Append('------------------------------------------------------------------------------');
  MemoResultFormat.Lines.Append('Original: ' + EditLength7.Text + ' - Valor: ' + TFloat.ToString(EditLength7.Text, TResultMode(ComboBoxResult7.ItemIndex), TResultFormat.BR, StrToInt(EditDecimal7.Text)));
end;

procedure TSQLConnectionTester.FormatImplicitClick(Sender: TObject);
begin
  MemoResultFormat.Lines.Clear;
  MemoResultFormat.Lines.Append('Original: ' + EditLength1.Text + ' - Valor: ' + TFloat.ToString(EditLength1.Text, TResultMode(ComboBoxResult1.ItemIndex), TResultFormat.BR));
  MemoResultFormat.Lines.Append('------------------------------------------------------------------------------');
  MemoResultFormat.Lines.Append('Original: ' + EditLength2.Text + ' - Valor: ' + TFloat.ToString(EditLength2.Text, TResultMode(ComboBoxResult2.ItemIndex), TResultFormat.BR));
  MemoResultFormat.Lines.Append('------------------------------------------------------------------------------');
  MemoResultFormat.Lines.Append('Original: ' + EditLength3.Text + ' - Valor: ' + TFloat.ToString(EditLength3.Text, TResultMode(ComboBoxResult3.ItemIndex), TResultFormat.BR));
  MemoResultFormat.Lines.Append('------------------------------------------------------------------------------');
  MemoResultFormat.Lines.Append('Original: ' + EditLength4.Text + ' - Valor: ' + TFloat.ToString(EditLength4.Text, TResultMode(ComboBoxResult4.ItemIndex), TResultFormat.BR));
  MemoResultFormat.Lines.Append('------------------------------------------------------------------------------');
  MemoResultFormat.Lines.Append('Original: ' + EditLength5.Text + ' - Valor: ' + TFloat.ToString(EditLength5.Text, TResultMode(ComboBoxResult5.ItemIndex), TResultFormat.BR));
  MemoResultFormat.Lines.Append('------------------------------------------------------------------------------');
  MemoResultFormat.Lines.Append('Original: ' + EditLength6.Text + ' - Valor: ' + TFloat.ToString(EditLength6.Text, TResultMode(ComboBoxResult6.ItemIndex), TResultFormat.BR));
  MemoResultFormat.Lines.Append('------------------------------------------------------------------------------');
  MemoResultFormat.Lines.Append('Original: ' + EditLength7.Text + ' - Valor: ' + TFloat.ToString(EditLength7.Text, TResultMode(ComboBoxResult7.ItemIndex), TResultFormat.BR));
end;

procedure TSQLConnectionTester.FormShow(Sender: TObject);
begin
  EditKeyDownMoney.Placeholder('Máscara Monetária', TForm(TSQLConnectionTester));
  EditKeyDownFloat.Placeholder('Máscara Decimal[4]', TForm(TSQLConnectionTester));
end;

procedure TSQLConnectionTester.TabDBFirebirdClick(Sender: TObject);
var
  DBFirebird : TConnection;
  SQL: TQuery;
  Query: TQueryBuilder;
  Connector: TConnector;
begin
  DBFirebird := TConnection.Create;
  //DBFirebird := TConnectionClass.GetInstance();
  try
    DBFirebird.Driver := FIREBIRD;
    DBFirebird.Host := '127.0.0.1';
    DBFirebird.Port := 3050;
    DBFirebird.Database :=
    {$IFDEF MSWINDOWS}
      ExtractFilePath(ParamStr(0)) + 'DB.FDB';
    {$ELSE}
      TPath.Combine(TPath.GetDocumentsPath, 'DB.FDB');
    {$ENDIF}
    DBFirebird.Username := 'SYSDBA';
    DBFirebird.Password := 'masterkey';

    if not DBFirebird.GetInstance.Connection.Connected then
      DBFirebird.GetInstance.Connection.Connected := True;

    SQL := TQuery.Create;
    try
      SQL := Query.View('SELECT "id" AS "Codigo", "nome" AS "Estado", "sigla" AS "Sigla" FROM "estado" ORDER BY "id"');

      Connector := TConnector.Create(SQL);
      try
        Connector.ToCombo(ComboBoxFirebird, 'Codigo', 'Estado', 1);
        Connector.ToCombo(ComboEditFirebird, 'Codigo', 'Estado', 2);
        Connector.ToListBox(ListBoxFirebird, 'Codigo', 'Estado', 3);
        Connector.ToListView(ListViewFirebird, 'Codigo', 'Estado', ['Sigla', 'Sigla', 'Sigla'], 4);
        Connector.ToGrid(StringGridFirebird, 5);
        Connector.ToGrid(GridFirebird, 6);
      finally
        Connector.Destroy;
      end;

    finally
      SQL.Destroy;
    end;

  finally
    DBFirebird.Destroy;
  end;
end;

procedure TSQLConnectionTester.TabDBMySQLClick(Sender: TObject);
var
  DBMySQL : TConnection;
  SQL: TQuery;
  Query: TQueryBuilder;
  Connector: TConnector;
begin
  DBMySQL := TConnection.Create;
  //DBMySQL := TConnectionClass.GetInstance();
  try
    DBMySQL.Driver := MYSQL;
    DBMySQL.Host := '127.0.0.1';
    DBMySQL.Port := 3306;
    DBMySQL.Database := 'demodev';
    DBMySQL.Username := 'root';
    DBMySQL.Password := '';

    if not DBMySQL.GetInstance.Connection.Connected then
      DBMySQL.GetInstance.Connection.Connected := True;

    SQL := TQuery.Create;
    try
      SQL := Query.View('SELECT id AS Codigo, nome AS Estado, sigla AS Sigla FROM estado ORDER BY id');

      Connector := TConnector.Create(SQL);
      try
        Connector.ToCombo(ComboBoxMySQL, 'Codigo', 'Estado', 1);
        Connector.ToCombo(ComboEditMySQL, 'Codigo', 'Estado', 2);
        Connector.ToListBox(ListBoxMySQL, 'Codigo', 'Estado', 3);
        Connector.ToListView(ListViewMySQL, 'Codigo', 'Estado', ['Sigla', 'Sigla', 'Sigla'], 4);
        Connector.ToGrid(StringGridMySQL, 5);
        Connector.ToGrid(GridMySQL, 6);
      finally
        Connector.Destroy;
      end;

    finally
      SQL.Destroy;
    end;

  finally
    DBMySQL.Destroy;
  end;
end;

procedure TSQLConnectionTester.TabDBPostgreSQLClick(Sender: TObject);
var
  DBPostgreSQL : TConnection;
  SQL: TQuery;
  Query: TQueryBuilder;
  Connector: TConnector;
begin
  DBPostgreSQL := TConnection.Create;
  //DBPostgreSQL := TConnectionClass.GetInstance();
  try
    DBPostgreSQL.Driver := POSTGRES;
    DBPostgreSQL.Host := '127.0.0.1';
    DBPostgreSQL.Port := 5432;
    DBPostgreSQL.Database := 'postgres';
    DBPostgreSQL.Schema := 'demodev';
    DBPostgreSQL.Username := 'postgres';
    DBPostgreSQL.Password := 'masterkey';

    if not DBPostgreSQL.GetInstance.Connection.Connected then
      DBPostgreSQL.GetInstance.Connection.Connected := True;

    SQL := TQuery.Create;
    try
      SQL := Query.View('SELECT "id" AS "Codigo", "nome" AS "Estado", "sigla" AS "Sigla" FROM "estado" ORDER BY "id"');

      Connector := TConnector.Create(SQL);
      try
        Connector.ToCombo(ComboBoxPostgreSQL, 'Codigo', 'Estado', 1);
        Connector.ToCombo(ComboEditPostgreSQL, 'Codigo', 'Estado', 2);
        Connector.ToListBox(ListBoxPostgreSQL, 'Codigo', 'Estado', 3);
        Connector.ToListView(ListViewPostgreSQL, 'Codigo', 'Estado', ['Sigla', 'Sigla', 'Sigla'], 4);
        Connector.ToGrid(StringGridPostgreSQL, 5);
        Connector.ToGrid(GridPostgreSQL, 6);
      finally
        Connector.Destroy;
      end;

    finally
      SQL.Destroy;
    end;

  finally
    DBPostgreSQL.Destroy;
  end;
end;

procedure TSQLConnectionTester.TabDBSQLiteClick(Sender: TObject);
var
  DBSQLite : TConnection;
  SQL: TQuery;
  Query: TQueryBuilder;
  Connector: TConnector;
begin
  DBSQLite := TConnection.Create;
  //DBSQLite := TConnectionClass.GetInstance();
  try
    DBSQLite.Driver := SQLITE;
    DBSQLite.Database :=
    {$IFDEF MSWINDOWS}
      ExtractFilePath(ParamStr(0)) + 'DB.SQLITE';
    {$ELSE}
      TPath.Combine(TPath.GetDocumentsPath, 'DB.SQLITE');
    {$ENDIF}

    if not DBSQLite.GetInstance.Connection.Connected then
      DBSQLite.GetInstance.Connection.Connected := True;

    SQL := TQuery.Create;
    try
      SQL := Query.View('SELECT id AS Codigo, nome AS Estado, sigla AS Sigla FROM estado ORDER BY id');

      Connector := TConnector.Create(SQL);
      try
        Connector.ToCombo(ComboBoxSQLite, 'Codigo', 'Estado', 1);
        Connector.ToCombo(ComboEditSQLite, 'Codigo', 'Estado', 2);
        Connector.ToListBox(ListBoxSQLite, 'Codigo', 'Estado', 3);
        Connector.ToListView(ListViewSQLite, 'Codigo', 'Estado', ['Sigla', 'Sigla', 'Sigla'], 4);
        Connector.ToGrid(StringGridSQLite, 5);
        Connector.ToGrid(GridSQLite, 6);
      finally
        Connector.Destroy;
      end;

    finally
      SQL.Destroy;
    end;

  finally
    DBSQLite.Destroy;
  end;
end;

procedure TSQLConnectionTester.ButReplaceClick(Sender: TObject);
var
  DB: TConnection;
  Dados1, Filtros1 : TArray;
  Query1: TQueryBuilder;
  SQL1: TQuery;
  Dados2, Filtros2 : TArrayVariant;
  Query2: TQueryBuilder;
  SQL2: TQuery;
begin
  DB := TConnection.Create;
  //DB := TConnectionClass.GetInstance();
  try
    DB.Driver := MYSQL;
    DB.Host := '127.0.0.1';
    DB.Port := 3306;
    DB.Database := 'simapp_dev_000';
    DB.Username := 'root';
    DB.Password := '';

    if not DB.GetInstance.Connection.Connected then
      DB.GetInstance.Connection.Connected := True;

    Dados1 := TArray.Create;
    Filtros1 := TArray.Create;
    SQL1 := TQuery.Create();
    try
      Dados1.Clear;
      SQL1 := Query1.View('SELECT * FROM app_empresa');
      Dados1['id'] := SQL1.Query.FieldByName('id').Value;
      Dados1['tipo_pessoa'] := SQL1.Query.FieldByName('tipo_pessoa').Value;
      Dados1['tipo_documento'] := SQL1.Query.FieldByName('tipo_documento').Value;
      Dados1['tipo_estabelecimento'] := SQL1.Query.FieldByName('tipo_estabelecimento').Value;
      Dados1['regime_tributario'] := SQL1.Query.FieldByName('regime_tributario').Value;
      Dados1['documento_cadastral'] := SQL1.Query.FieldByName('documento_cadastral').Value;
      Dados1['inscricao_estadual'] := SQL1.Query.FieldByName('inscricao_estadual').Value;
      Dados1['inscricao_municipal'] := SQL1.Query.FieldByName('inscricao_municipal').Value;
      Dados1['razao_social'] := SQL1.Query.FieldByName('razao_social').Value;
      Dados1['nome_fantasia'] := SQL1.Query.FieldByName('nome_fantasia').Value;
      Dados1['cnae_principal_id'] := SQL1.Query.FieldByName('cnae_principal_id').Value;
      Dados1['arquivo_imagem_url'] := SQL1.Query.FieldByName('arquivo_imagem_url').Value;
      Dados1['arquivo_imagem_raw'] := SQL1.Query.FieldByName('arquivo_imagem_raw').Value;
      Dados1['endereco'] := SQL1.Query.FieldByName('endereco').Value;
      Dados1['contato'] := SQL1.Query.FieldByName('contato').Value;
      Dados1['email'] := SQL1.Query.FieldByName('email').Value;
      Dados1['sincronizado'] := SQL1.Query.FieldByName('sincronizado').Value;
      Dados1['data_insercao'] := SQL1.Query.FieldByName('data_insercao').Value;
      Dados1['data_edicao'] := SQL1.Query.FieldByName('data_edicao').Value;
      Showmessage(Query1.Replace('app_empresa', Dados1));
      Filtros1.Clear;
      Filtros1['id ='] := '1';
      Showmessage(Query1.Replace('app_empresa', Dados1, Filtros1));
    finally
      FreeAndNil(Filtros1);
      FreeAndNil(Dados1);
      FreeAndNil(SQL1);
    end;

    Filtros2 := TArrayVariant.Create;
    Dados2 := TArrayVariant.Create;
    SQL2 := TQuery.Create();
    try
      Dados2.Clear;
      SQL2 := Query2.View('SELECT * FROM app_empresa');
      Dados2['id'] := SQL2.Query.FieldByName('id').Value;
      Dados2['tipo_pessoa'] := SQL2.Query.FieldByName('tipo_pessoa').Value;
      Dados2['tipo_documento'] := SQL2.Query.FieldByName('tipo_documento').Value;
      Dados2['tipo_estabelecimento'] := SQL2.Query.FieldByName('tipo_estabelecimento').Value;
      Dados2['regime_tributario'] := SQL2.Query.FieldByName('regime_tributario').Value;
      Dados2['documento_cadastral'] := SQL2.Query.FieldByName('documento_cadastral').Value;
      Dados2['inscricao_estadual'] := SQL2.Query.FieldByName('inscricao_estadual').Value;
      Dados2['inscricao_municipal'] := SQL2.Query.FieldByName('inscricao_municipal').Value;
      Dados2['razao_social'] := SQL2.Query.FieldByName('razao_social').Value;
      Dados2['nome_fantasia'] := SQL2.Query.FieldByName('nome_fantasia').Value;
      Dados2['cnae_principal_id'] := SQL2.Query.FieldByName('cnae_principal_id').Value;
      Dados2['arquivo_imagem_url'] := SQL2.Query.FieldByName('arquivo_imagem_url').Value;
      Dados2['arquivo_imagem_raw'] := SQL2.Query.FieldByName('arquivo_imagem_raw').Value;
      Dados2['endereco'] := SQL2.Query.FieldByName('endereco').Value;
      Dados2['contato'] := SQL2.Query.FieldByName('contato').Value;
      Dados2['email'] := SQL2.Query.FieldByName('email').Value;
      Dados2['sincronizado'] := SQL2.Query.FieldByName('sincronizado').Value;
      Dados2['data_insercao'] := SQL2.Query.FieldByName('data_insercao').Value;
      Dados2['data_edicao'] := SQL2.Query.FieldByName('data_edicao').Value;
      Showmessage(Query2.Replace('app_empresa', Dados2));
      Filtros2.Clear;
      Filtros2['id ='] := '1';
      Showmessage(Query2.Replace('app_empresa', Dados2, Filtros2));
    finally
      FreeAndNil(Filtros2);
      FreeAndNil(Dados2);
      FreeAndNil(SQL2);
    end;

  finally
    FreeAndNil(DB);
  end;
end;

procedure TSQLConnectionTester.Button1Click(Sender: TObject);
begin
//  Showmessage(TFormatDateTime.ToArray('2020-02-28 10:23:59 +02:00').ToList(True));
//  Showmessage(TFormatDateTime.ToArray('29/02/2020 10:23:59 AM').ToList(True));
end;

procedure TSQLConnectionTester.ButCopyClick(Sender: TObject);
var
  DB: TConnection;
  Dados1 : TArrayVariant;
  Query1: TQueryBuilder;
  SQL1: TQuery;

  Dados2 : TArrayVariant;
begin
  DB := TConnection.Create;
  //DB := TConnectionClass.GetInstance();
  try
    DB.Driver := MYSQL;
    DB.Host := '127.0.0.1';
    DB.Port := 3306;
    DB.Database := 'simapp_dev_000';
    DB.Username := 'root';
    DB.Password := '';

    if not DB.GetInstance.Connection.Connected then
      DB.GetInstance.Connection.Connected := True;

    Dados1 := TArrayVariant.Create;
    SQL1 := TQuery.Create();
    try
      Dados1.Clear;
      SQL1 := Query1.View('SELECT * FROM app_empresa');
      Dados1['id'] := SQL1.Query.FieldByName('id').Value;
      Dados1['tipo_pessoa'] := SQL1.Query.FieldByName('tipo_pessoa').Value;
      Dados1['tipo_documento'] := SQL1.Query.FieldByName('tipo_documento').Value;
      Dados1['tipo_estabelecimento'] := SQL1.Query.FieldByName('tipo_estabelecimento').Value;
      Dados1['regime_tributario'] := SQL1.Query.FieldByName('regime_tributario').Value;
      Dados1['documento_cadastral'] := SQL1.Query.FieldByName('documento_cadastral').Value;
      Dados1['inscricao_estadual'] := SQL1.Query.FieldByName('inscricao_estadual').Value;
      Dados1['inscricao_municipal'] := SQL1.Query.FieldByName('inscricao_municipal').Value;
      Dados1['razao_social'] := SQL1.Query.FieldByName('razao_social').Value;
      Dados1['nome_fantasia'] := SQL1.Query.FieldByName('nome_fantasia').Value;
      Dados1['cnae_principal_id'] := SQL1.Query.FieldByName('cnae_principal_id').Value;
      Dados1['arquivo_imagem_url'] := SQL1.Query.FieldByName('arquivo_imagem_url').Value;
      Dados1['arquivo_imagem_raw'] := SQL1.Query.FieldByName('arquivo_imagem_raw').Value;
      Dados1['endereco'] := SQL1.Query.FieldByName('endereco').Value;
      Dados1['contato'] := SQL1.Query.FieldByName('contato').Value;
      Dados1['email'] := SQL1.Query.FieldByName('email').Value;
      Dados1['sincronizado'] := SQL1.Query.FieldByName('sincronizado').Value;
      Dados1['data_insercao'] := SQL1.Query.FieldByName('data_insercao').Value;
      Dados1['data_edicao'] := SQL1.Query.FieldByName('data_edicao').Value;
      ShowMessage(Dados1['arquivo_imagem_raw']);
      Dados2 := TArrayVariant.Create(Dados1);
      ShowMessage(Dados2['arquivo_imagem_raw']);
    finally
      FreeAndNil(Dados1);
      FreeAndNil(SQL1);
      FreeAndNil(Dados2);
    end;

  finally
    FreeAndNil(DB);
  end;
end;

procedure TSQLConnectionTester.ButCloneClick(Sender: TObject);
var
  DB: TConnection;
  Dados1 : TArrayVariant;
  Query1: TQueryBuilder;
  Dados2 : TArrayVariant;
begin
  DB := TConnection.Create;
  //DB := TConnectionClass.GetInstance();
  try
    DB.Driver := MYSQL;
    DB.Host := '127.0.0.1';
    DB.Port := 3306;
    DB.Database := 'simapp_dev_000';
    DB.Username := 'root';
    DB.Password := '';

    if not DB.GetInstance.Connection.Connected then
      DB.GetInstance.Connection.Connected := True;

    Dados1 := TArrayVariant.Create;

    try
      Dados1.Clear;
      Query1.Fetch('SELECT * FROM app_empresa', Dados1);
      ShowMessage(Dados1['arquivo_imagem_raw']);

      Dados2 := TArrayVariant.Create(Dados1);
      ShowMessage(Dados2['arquivo_imagem_raw']);
    finally
      FreeAndNil(Dados1);
      FreeAndNil(Dados2);
    end;

  finally
    FreeAndNil(DB);
  end;
end;

procedure TSQLConnectionTester.ButDeleteClick(Sender: TObject);
var
  DB: TConnection;
  Filtros1: TArray;
  Query1: TQueryBuilder;
  Filtros2 : TArrayVariant;
  Query2: TQueryBuilder;
begin
  DB := TConnection.Create;
  //DB := TConnectionClass.GetInstance();
  try
    DB.Driver := MYSQL;
    DB.Host := '127.0.0.1';
    DB.Port := 3306;
    DB.Database := 'simapp_dev_000';
    DB.Username := 'root';
    DB.Password := '';

    if not DB.GetInstance.Connection.Connected then
      DB.GetInstance.Connection.Connected := True;

    //Delete Genérico
    Showmessage(Query1.Delete('app_empresa'));

    Filtros1 := TArray.Create;
    try
      Filtros1.Clear;
      Filtros1['id ='] := '1';
      Showmessage(Query1.Delete('app_empresa', Filtros1));
    finally
      FreeAndNil(Filtros1);
    end;

    Filtros2 := TArrayVariant.Create;
    try
      Filtros2.Clear;
      Filtros2['id ='] := '1';
      Showmessage(Query2.Delete('app_empresa', Filtros2));
    finally
      FreeAndNil(Filtros1);
    end;

  finally
    FreeAndNil(DB);
  end;
end;

procedure TSQLConnectionTester.ButUpdateClick(Sender: TObject);
var
  DB: TConnection;
  Dados1, Filtros1: TArray;
  Query1: TQueryBuilder;
  SQL1: TQuery;
  Dados2, Filtros2 : TArrayVariant;
  Query2: TQueryBuilder;
  SQL2: TQuery;
begin
  DB := TConnection.Create;
  //DB := TConnectionClass.GetInstance();
  try
    DB.Driver := MYSQL;
    DB.Host := '127.0.0.1';
    DB.Port := 3306;
    DB.Database := 'simapp_dev_000';
    DB.Username := 'root';
    DB.Password := '';

    if not DB.GetInstance.Connection.Connected then
      DB.GetInstance.Connection.Connected := True;

    Dados1 := TArray.Create;
    Filtros1 := TArray.Create;
    SQL1 := TQuery.Create();
    try
      Dados1.Clear;
      SQL1 := Query1.View('SELECT * FROM app_empresa');
      Dados1['id'] := SQL1.Query.FieldByName('id').Value;
      Dados1['tipo_pessoa'] := SQL1.Query.FieldByName('tipo_pessoa').Value;
      Dados1['tipo_documento'] := SQL1.Query.FieldByName('tipo_documento').Value;
      Dados1['tipo_estabelecimento'] := SQL1.Query.FieldByName('tipo_estabelecimento').Value;
      Dados1['regime_tributario'] := SQL1.Query.FieldByName('regime_tributario').Value;
      Dados1['documento_cadastral'] := SQL1.Query.FieldByName('documento_cadastral').Value;
      Dados1['inscricao_estadual'] := SQL1.Query.FieldByName('inscricao_estadual').Value;
      Dados1['inscricao_municipal'] := SQL1.Query.FieldByName('inscricao_municipal').Value;
      Dados1['razao_social'] := SQL1.Query.FieldByName('razao_social').Value;
      Dados1['nome_fantasia'] := SQL1.Query.FieldByName('nome_fantasia').Value;
      Dados1['cnae_principal_id'] := SQL1.Query.FieldByName('cnae_principal_id').Value;
      Dados1['arquivo_imagem_url'] := SQL1.Query.FieldByName('arquivo_imagem_url').Value;
      Dados1['arquivo_imagem_raw'] := SQL1.Query.FieldByName('arquivo_imagem_raw').Value;
      Dados1['endereco'] := SQL1.Query.FieldByName('endereco').Value;
      Dados1['contato'] := SQL1.Query.FieldByName('contato').Value;
      Dados1['email'] := SQL1.Query.FieldByName('email').Value;
      Dados1['sincronizado'] := SQL1.Query.FieldByName('sincronizado').Value;
      Dados1['data_insercao'] := SQL1.Query.FieldByName('data_insercao').Value;
      Dados1['data_edicao'] := SQL1.Query.FieldByName('data_edicao').Value;
      Showmessage(Query1.Update('app_empresa', Dados1));
      Filtros1.Clear;
      Filtros1['id ='] := '1';
      Showmessage(Query1.Update('app_empresa', Dados1, Filtros1));
    finally
      FreeAndNil(Filtros1);
      FreeAndNil(Dados1);
      FreeAndNil(SQL1);
    end;

    Dados2 := TArrayVariant.Create;
    Filtros2 := TArrayVariant.Create;
    SQL2 := TQuery.Create();
    try
      Dados2.Clear;
      SQL2 := Query2.View('SELECT * FROM app_empresa');
      Dados2['id'] := SQL2.Query.FieldByName('id').Value;
      Dados2['tipo_pessoa'] := SQL2.Query.FieldByName('tipo_pessoa').Value;
      Dados2['tipo_documento'] := SQL2.Query.FieldByName('tipo_documento').Value;
      Dados2['tipo_estabelecimento'] := SQL2.Query.FieldByName('tipo_estabelecimento').Value;
      Dados2['regime_tributario'] := SQL2.Query.FieldByName('regime_tributario').Value;
      Dados2['documento_cadastral'] := SQL2.Query.FieldByName('documento_cadastral').Value;
      Dados2['inscricao_estadual'] := SQL2.Query.FieldByName('inscricao_estadual').Value;
      Dados2['inscricao_municipal'] := SQL2.Query.FieldByName('inscricao_municipal').Value;
      Dados2['razao_social'] := SQL2.Query.FieldByName('razao_social').Value;
      Dados2['nome_fantasia'] := SQL2.Query.FieldByName('nome_fantasia').Value;
      Dados2['cnae_principal_id'] := SQL2.Query.FieldByName('cnae_principal_id').Value;
      Dados2['arquivo_imagem_url'] := SQL2.Query.FieldByName('arquivo_imagem_url').Value;
      Dados2['arquivo_imagem_raw'] := SQL2.Query.FieldByName('arquivo_imagem_raw').Value;
      Dados2['endereco'] := SQL2.Query.FieldByName('endereco').Value;
      Dados2['contato'] := SQL2.Query.FieldByName('contato').Value;
      Dados2['email'] := SQL2.Query.FieldByName('email').Value;
      Dados2['sincronizado'] := SQL2.Query.FieldByName('sincronizado').Value;
      Dados2['data_insercao'] := SQL2.Query.FieldByName('data_insercao').Value;
      Dados2['data_edicao'] := SQL2.Query.FieldByName('data_edicao').Value;
      Showmessage(Query2.Update('app_empresa', Dados2));
      Filtros2.Clear;
      Filtros2['id ='] := '1';
      Showmessage(Query2.Update('app_empresa', Dados2, Filtros2));
    finally
      FreeAndNil(Filtros2);
      FreeAndNil(Dados2);
      FreeAndNil(SQL2);
    end;

  finally
    FreeAndNil(DB);
  end;
end;

procedure TSQLConnectionTester.ButInsertClick(Sender: TObject);
var
  DB: TConnection;
  Dados1 : TArray;
  Query1: TQueryBuilder;
  SQL1: TQuery;
  Dados2 : TArrayVariant;
  Query2: TQueryBuilder;
  SQL2: TQuery;
begin
  DB := TConnection.Create;
  //DB := TConnectionClass.GetInstance();
  try
    DB.Driver := MYSQL;
    DB.Host := '127.0.0.1';
    DB.Port := 3306;
    DB.Database := 'simapp_dev_000';
    DB.Username := 'root';
    DB.Password := '';

    if not DB.GetInstance.Connection.Connected then
      DB.GetInstance.Connection.Connected := True;

    Dados1 := TArray.Create;
    SQL1 := TQuery.Create();
    try
      Dados1.Clear;
      SQL1 := Query1.View('SELECT * FROM app_empresa');
      Dados1['id'] := SQL1.Query.FieldByName('id').Value;
      Dados1['tipo_pessoa'] := SQL1.Query.FieldByName('tipo_pessoa').Value;
      Dados1['tipo_documento'] := SQL1.Query.FieldByName('tipo_documento').Value;
      Dados1['tipo_estabelecimento'] := SQL1.Query.FieldByName('tipo_estabelecimento').Value;
      Dados1['regime_tributario'] := SQL1.Query.FieldByName('regime_tributario').Value;
      Dados1['documento_cadastral'] := SQL1.Query.FieldByName('documento_cadastral').Value;
      Dados1['inscricao_estadual'] := SQL1.Query.FieldByName('inscricao_estadual').Value;
      Dados1['inscricao_municipal'] := SQL1.Query.FieldByName('inscricao_municipal').Value;
      Dados1['razao_social'] := SQL1.Query.FieldByName('razao_social').Value;
      Dados1['nome_fantasia'] := SQL1.Query.FieldByName('nome_fantasia').Value;
      Dados1['cnae_principal_id'] := SQL1.Query.FieldByName('cnae_principal_id').Value;
      Dados1['arquivo_imagem_url'] := SQL1.Query.FieldByName('arquivo_imagem_url').Value;
      Dados1['arquivo_imagem_raw'] := SQL1.Query.FieldByName('arquivo_imagem_raw').Value;
      Dados1['endereco'] := SQL1.Query.FieldByName('endereco').Value;
      Dados1['contato'] := SQL1.Query.FieldByName('contato').Value;
      Dados1['email'] := SQL1.Query.FieldByName('email').Value;
      Dados1['sincronizado'] := SQL1.Query.FieldByName('sincronizado').Value;
      Dados1['data_insercao'] := SQL1.Query.FieldByName('data_insercao').Value;
      Dados1['data_edicao'] := SQL1.Query.FieldByName('data_edicao').Value;
      Showmessage(Query1.Insert('app_empresa', Dados1));
    finally
      FreeAndNil(Dados1);
      FreeAndNil(SQL1);
    end;

    Dados2 := TArrayVariant.Create;
    SQL2 := TQuery.Create();
    try
      Dados2.Clear;
      SQL2 := Query2.View('SELECT * FROM app_empresa');
      Dados2['id'] := SQL2.Query.FieldByName('id').Value;
      Dados2['tipo_pessoa'] := SQL2.Query.FieldByName('tipo_pessoa').Value;
      Dados2['tipo_documento'] := SQL2.Query.FieldByName('tipo_documento').Value;
      Dados2['tipo_estabelecimento'] := SQL2.Query.FieldByName('tipo_estabelecimento').Value;
      Dados2['regime_tributario'] := SQL2.Query.FieldByName('regime_tributario').Value;
      Dados2['documento_cadastral'] := SQL2.Query.FieldByName('documento_cadastral').Value;
      Dados2['inscricao_estadual'] := SQL2.Query.FieldByName('inscricao_estadual').Value;
      Dados2['inscricao_municipal'] := SQL2.Query.FieldByName('inscricao_municipal').Value;
      Dados2['razao_social'] := SQL2.Query.FieldByName('razao_social').Value;
      Dados2['nome_fantasia'] := SQL2.Query.FieldByName('nome_fantasia').Value;
      Dados2['cnae_principal_id'] := SQL2.Query.FieldByName('cnae_principal_id').Value;
      Dados2['arquivo_imagem_url'] := SQL2.Query.FieldByName('arquivo_imagem_url').Value;
      Dados2['arquivo_imagem_raw'] := SQL2.Query.FieldByName('arquivo_imagem_raw').Value;
      Dados2['endereco'] := SQL2.Query.FieldByName('endereco').Value;
      Dados2['contato'] := SQL2.Query.FieldByName('contato').Value;
      Dados2['email'] := SQL2.Query.FieldByName('email').Value;
      Dados2['sincronizado'] := SQL2.Query.FieldByName('sincronizado').Value;
      Dados2['data_insercao'] := SQL2.Query.FieldByName('data_insercao').Value;
      Dados2['data_edicao'] := SQL2.Query.FieldByName('data_edicao').Value;
      Showmessage(Query2.Insert('app_empresa', Dados2));
    finally
      FreeAndNil(Dados2);
      FreeAndNil(SQL2);
    end;

  finally
    FreeAndNil(DB);
  end;
end;

end.
